"use strict";$("#responsible_phone").mask("+7(999)999-99-99");var btnSave=document.getElementById("btn_save"),warning=document.querySelector(".warning__inner"),checkboxPublicName=document.getElementById("check_public"),publicDescription=document.getElementById("public_description"),groupName=document.querySelector("#group_name"),groupAlias=document.querySelector("#group_alias"),groupMail=document.querySelector("#group_mail"),responsiblePhone=document.querySelector("#responsible_phone"),responsibleName=document.querySelector("#responsible_name"),responsiblePosition=document.querySelector("#responsible_position"),descriptionInner=document.querySelector("#description_inner"),descriptionPublic=document.querySelector("#description_public"),inputs=document.querySelectorAll(".form__input"),checkReg=function(e,t,n){console.dir(e.parentElement);var i=document.createElement("span");i.classList.toggle("validate"),i.classList.toggle("validate__error");var a=e.parentElement.lastElementChild;if("span"===a.tagName.toLowerCase()&&a.remove(),e.classList.contains("form__input--validate--error")&&e.classList.toggle("form__input--validate--error"),e.nextElementSibling.classList.contains("form__label--validate--error")&&e.nextElementSibling.classList.toggle("form__label--validate--error"),!1===t.test(e.value))return e.classList.toggle("form__input--validate--error"),e.nextElementSibling.classList.toggle("form__label--validate--error"),e.parentElement.append(i),i.textContent=n,!1},checkEmpty=function(e){var t=document.createElement("span");t.classList.toggle("validate"),t.classList.toggle("validate__error");var n=e.parentElement.lastElementChild;if("span"===n.tagName.toLowerCase()&&n.remove(),e.classList.contains("form__input--validate--error")&&e.classList.toggle("form__input--validate--error"),e.nextElementSibling.classList.contains("form__label--validate--error")&&e.nextElementSibling.classList.toggle("form__label--validate--error"),""===e.value)return e.classList.toggle("form__input--validate--error"),e.nextElementSibling.classList.toggle("form__label--validate--error"),e.parentElement.append(t),!(t.textContent="Поле пустое, введите символы")},checkInputValues=function(){inputs.forEach(function(e){e.addEventListener("input",function(){"checkbox"!==e.type&&(""!==e.value?btnSave.removeAttribute("disabled"):btnSave.setAttribute("disabled","disabled"))})})},checkInputValuesOnLoad=function(){inputs.forEach(function(e){"checkbox"!==e.type&&""!==e.value&&btnSave.removeAttribute("disabled")})},validMail=function(){checkReg(groupMail,/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/,"E-Mail не введен или введен некорректно")},validAlias=function(){checkReg(groupAlias,/^[A-Za-z0-9-]+$/,"Алиас не может быть пустым, содержать русские буквы, пробелы или символы")},saveData=function(){localStorage.setItem("group_name",groupName.value),localStorage.setItem("group_alias",groupAlias.value),localStorage.setItem("group_mail",groupMail.value),localStorage.setItem("responsible_phone",responsiblePhone.value),localStorage.setItem("responsible_name",responsibleName.value),localStorage.setItem("responsible_position",responsiblePosition.value),localStorage.setItem("description_inner",descriptionInner.value),localStorage.setItem("description_public",descriptionPublic.value)},getData=function(){groupName.value=localStorage.getItem("group_name"),groupAlias.value=localStorage.getItem("group_alias"),groupMail.value=localStorage.getItem("group_mail"),responsiblePhone.value=localStorage.getItem("responsible_phone"),responsibleName.value=localStorage.getItem("responsible_name"),responsiblePosition.value=localStorage.getItem("responsible_position"),descriptionInner.value=localStorage.getItem("description_inner"),descriptionPublic.value=localStorage.getItem("description_public")},showWarning=function(e){e.preventDefault(),saveData(),warning.classList.toggle("warning__inner--active"),btnSave.setAttribute("disabled","disabled"),setTimeout(function(){warning.classList.toggle("warning__inner--active"),setTimeout(function(){return btnSave.removeAttribute("disabled")},500)},4500)},showPublic=function(){return publicDescription.classList.toggle("form-description__item--active")},validName=function(){checkEmpty(groupName)},validResponsibleName=function(){checkEmpty(responsibleName)},validResponsiblePosition=function(){checkEmpty(responsiblePosition)},validDescriptionInner=function(){checkEmpty(descriptionInner)},validDescriptionPublic=function(){checkEmpty(descriptionPublic)};document.addEventListener("DOMContentLoaded",function(){getData(),checkInputValuesOnLoad(),checkInputValues()}),btnSave.addEventListener("click",showWarning),checkboxPublicName.addEventListener("input",showPublic),groupAlias.addEventListener("input",validAlias),groupMail.addEventListener("input",validMail),groupName.addEventListener("input",validName),responsibleName.addEventListener("input",validResponsibleName),responsiblePosition.addEventListener("input",validResponsiblePosition),descriptionInner.addEventListener("input",validDescriptionInner),descriptionPublic.addEventListener("input",validDescriptionPublic);