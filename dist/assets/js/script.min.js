"use strict";$("#responsible_phone").mask("+7(999)999-99-99");var btnSave=document.getElementById("btn_save"),warning=document.querySelector(".warning__inner"),checkboxPublicName=document.getElementById("check_public"),publicDescription=document.getElementById("public_description"),groupName=document.querySelector("#group_name"),groupAlias=document.querySelector("#group_alias"),groupMail=document.querySelector("#group_mail"),responsiblePhone=document.querySelector("#responsible_phone"),responsibleName=document.querySelector("#responsible_name"),responsiblePosition=document.querySelector("#responsible_position"),descriptionInner=document.querySelector("#description_inner"),descriptionPublic=document.querySelector("#description_public"),errorSpan=document.createElement("span"),checkReg=function(e,i,n){if(errorSpan.remove(),e.classList.remove("form__input--validate--error"),e.nextElementSibling.classList.remove("form__label--validate--error"),!1===i.test(e.value))return e.classList.add("form__input--validate--error"),e.nextElementSibling.classList.add("form__label--validate--error"),e.parentElement.append(errorSpan),errorSpan.classList.add("validate"),errorSpan.classList.add("validate__error"),errorSpan.textContent=n,!1},checkEmpty=function(e){if(errorSpan.remove(),e.classList.remove("form__input--validate--error"),e.nextElementSibling.classList.remove("form__label--validate--error"),""===e.value)return e.classList.add("form__input--validate--error"),e.nextElementSibling.classList.add("form__label--validate--error"),e.parentElement.append(errorSpan),errorSpan.classList.add("validate"),errorSpan.classList.add("validate__error"),!(errorSpan.textContent="Поле пустое, введите символы")},validMail=function(){checkReg(groupMail,/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/,"E-Mail не введен или введен некорректно")},validAlias=function(){checkReg(groupAlias,/^[A-Za-z0-9-]+$/,"Алиас не может быть пустым или содержать русские буквы и пробелы")},saveData=function(){localStorage.setItem("group_name",groupName.value),localStorage.setItem("group_alias",groupAlias.value),localStorage.setItem("group_mail",groupMail.value),localStorage.setItem("responsible_phone",responsiblePhone.value),localStorage.setItem("responsible_name",responsibleName.value),localStorage.setItem("responsible_position",responsiblePosition.value),localStorage.setItem("description_inner",descriptionInner.value),localStorage.setItem("description_public",descriptionPublic.value)},getData=function(){groupName.value=localStorage.getItem("group_name"),groupAlias.value=localStorage.getItem("group_alias"),groupMail.value=localStorage.getItem("group_mail"),responsiblePhone.value=localStorage.getItem("responsible_phone"),responsibleName.value=localStorage.getItem("responsible_name"),responsiblePosition.value=localStorage.getItem("responsible_position"),descriptionInner.value=localStorage.getItem("description_inner"),descriptionPublic.value=localStorage.getItem("description_public")},showWarning=function(e){e.preventDefault(),saveData(),warning.classList.toggle("warning__inner--active"),setTimeout(function(){warning.classList.toggle("warning__inner--active")},5500)},showPublic=function(){return publicDescription.classList.toggle("form-description__item--active")},validName=function(){checkEmpty(groupName)},validResponsibleName=function(){checkEmpty(responsibleName)},validResponsiblePosition=function(){checkEmpty(responsiblePosition)},validDescriptionInner=function(){checkEmpty(descriptionInner)},validDescriptionPublic=function(){checkEmpty(descriptionPublic)};getData(),btnSave.addEventListener("click",showWarning),checkboxPublicName.addEventListener("change",showPublic),groupAlias.addEventListener("change",validAlias),groupMail.addEventListener("change",validMail),groupName.addEventListener("change",validName),responsibleName.addEventListener("change",validResponsibleName),responsiblePosition.addEventListener("change",validResponsiblePosition),descriptionInner.addEventListener("change",validDescriptionInner),descriptionPublic.addEventListener("change",validDescriptionPublic);