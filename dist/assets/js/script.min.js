"use strict";function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}document.addEventListener("DOMContentLoaded",function(){var t,r=document.getElementById("btn_save"),n=document.getElementById("btn_confirm"),a=document.getElementById("btn_reset"),e=document.querySelector(".warning__inner"),i=document.querySelector(".info"),o=document.querySelectorAll(".form__input"),l=document.querySelectorAll(".form__label"),c=[],s=[],u={},d=!1;o.forEach(function(e){"checkbox"!==e.type?c.push(e):"checkbox"===e.type&&(u=e)}),l.forEach(function(e){return"form__label"===e.className&&s.push(e)});function m(e,t){var r=document.createElement("span"),n=e.parentElement;r.classList.toggle("validate"),r.classList.toggle("validate__error"),t&&(r.textContent=t),s.forEach(function(e){e.parentElement===n&&e.classList.add("form__label--validate--error")}),e.classList.add("form__input--validate--error"),n.append(r)}function f(e){var t=e.parentElement;2<t.children.length&&_toConsumableArray(t.children).forEach(function(e){"span"===e.tagName.toLowerCase()&&e.remove()}),s.forEach(function(e){e.parentElement===t&&e.classList.remove("form__label--validate--error")}),e.classList.remove("form__input--validate--error")}function v(){d&&(c.forEach(function(e){""!==e.value.trim()&&localStorage.setItem(e.id,e.value.toString())}),localStorage.setItem(u.id,u.checked))}function _(){e.classList.toggle("warning__inner--active"),r.setAttribute("disabled","true"),setTimeout(function(){e.classList.toggle("warning__inner--active")},7e3)}!function(e,t){var c=1<arguments.length&&void 0!==t?t:"+7 (___) ___-__-__",r=document.querySelector(e);function n(e){var t=e.keyCode,r=c,n=r.replace(/\D/g,""),a=this.value.replace(/\D/g,""),i=0,o=r.replace(/[_\d]/g,function(e){return i<a.length?a.charAt(i++)||n.charAt(i):e});-1!=(i=o.indexOf("_"))&&(o=o.slice(0,i));var l=r.substr(0,this.value.length).replace(/_+/g,function(e){return"\\d{1,"+e.length+"}"}).replace(/[+()]/g,"\\$&");(!(l=new RegExp("^"+l+"$")).test(this.value)||this.value.length<5||47<t&&t<58)&&(this.value=o),"blur"==e.type&&this.value.length<5&&(this.value="")}r.addEventListener("input",n),r.addEventListener("focus",n),r.addEventListener("blur",n)}("#responsible_phone"),1<localStorage.length&&(c.forEach(function(e){""!==localStorage.getItem(e.id)&&(e.value=localStorage.getItem(e.id))}),u.checked="true"===localStorage.getItem(u.id)?1:0,c.forEach(function(e){e.parentElement.classList.contains("form-description__item--hide")&&(u.checked?e.parentElement.classList.add("form-description__item--active"):(e.parentElement.classList.remove("form-description__item--active"),e.value="",localStorage.removeItem(e.id)))}),_()),u.addEventListener("change",function(){c.forEach(function(e){e.parentElement.classList.contains("form-description__item--hide")&&e.parentElement.classList.toggle("form-description__item--active")})}),i.addEventListener("input",function(e){var o=e.target;if(c.forEach(function(e){if(o===e){if("group_name"===e.id){var t=/^[a-zа-я\s]+$/i;t.test(e.value)?f(e):t.test(e.value)||e.parentElement.children.length<3&&m(e,'Поле "Название группы" должно соржать только русские, английские буквы и символы пробела')}if("group_alias"===e.id){var r=/^[A-Za-z0-9-]+$/;r.test(e.value)?f(e):r.test(e.value)||e.parentElement.children.length<3&&m(e,'Алиас не может быть пустым, содержать русские буквы, пробелы или символы (кроме символа "-")')}if("group_mail"===e.id){var n=/^([\w-]+\.)*[\w-]+@[\w-]+(\.[\w-]+)*\.[a-z]{2,6}$/;n.test(e.value)?f(e):n.test(e.value.toLowerCase())||e.parentElement.children.length<3&&m(e,"Некорректно заполненное поле")}if("responsible_name"===e.id){var a=/^[a-zа-я\s]+$/i;a.test(e.value)?f(e):a.test(e.value.toLowerCase())||e.parentElement.children.length<3&&m(e,'Поле "ФИО представителя" должно соржать только русские, английские буквы и символы пробела')}if("responsible_position"===e.id){var i=/^[a-zа-я\s]+$/i;i.test(e.value)?f(e):i.test(e.value.toLowerCase())||e.parentElement.children.length<3&&m(e,'Поле "Должность ответственного" должно соржать только русские, английские буквы и символы пробела')}}}),t=document.querySelectorAll("span.validate"),0<c.filter(function(e){if(t&&0===t.length&&""!==e.value.trim())return e}).length)return d=!0,n.removeAttribute("disabled"),void r.removeAttribute("disabled");d=!1,n.setAttribute("disabled","true"),r.setAttribute("disabled","true")}),i.addEventListener("click",function(e){var t=e.target;t===a&&(u.checked=!1,c.forEach(function(e){f(e),e.parentElement.classList.contains("form-description__item--hide")&&(e.parentElement.classList.remove("form-description__item--active"),e.parentElement.value="")}),n.setAttribute("disabled","true"),r.setAttribute("disabled","true")),t===r&&(e.preventDefault(),v(),_())}),window.addEventListener("beforeunload",v)});